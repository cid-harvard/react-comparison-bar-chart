{"version":3,"sources":["../../src/components/Utils.ts","../../src/components/Root.tsx","../../src/components/Row.tsx","../../src/index.tsx","components/BostonNewYork3Digit.tsx","components/rapidTooltip.ts","components/BostonAracaju6Digit.tsx","components/BostonAracaju2Digit.tsx","components/BostonAracaju1Digit.tsx","components/BostonAracajuServicesOnly.tsx","components/RCAComparison.tsx","App.tsx","index.tsx"],"names":["Layout","Category","fadeIn","keyframes","highlightedIdName","Root","styled","LabelText","Cell","BarCell","RangeBase","RangeLeft","RangeRight","Bar","React","props","i","d","expanded","totalRightValues","totalLeftValues","rowHeight","totalValues","gridHeight","orderedRightData","rightMax","leftMax","onRowHover","leftRange","rightRange","layout","highlighted","chartWidth","textWidth","isRowVisible","category","style","height","backgroundColor","undefined","pointerEvents","transitionDelay","label","className","textAlign","leftBar","width","role","rightBar","onMouseMove","e","datum","mouseCoords","x","y","clientY","onMouseLeave","id","Container","ChartContainer","ChartBlock","TitleRoot","AxisLines","TitleBase","TitleLeft","TitleRight","H1","H2","Grid","ExpandButtonRow","ButtonContainer","ExpandButton","Arrow","AxisValue","AxisText","AxisLine","AxisTitle","Direction","roundUpToHalf","value","roundedUp","Math","previousHalfValue","primaryData","secondaryData","nValuesToShow","formatValue","titles","expandCollapseText","axisLabel","hideExpandCollapseButton","initialExpanded","onExpandCollapseButtonHover","onHighlightError","numberOfXAxisTicks","leftData","rightData","useState","setExpanded","scrollWidth","setMeasurements","rootRef","useRef","textRef","chartRef","useEffect","chartRect","textRect","updateWindowWidth","window","highlightedElm","rootNode","highlightedRect","behavior","scrollToElm","setTimeout","orderBy","orderedLeftData","rightTop","leftTop","rightTopValue","leftTopValue","rawTotalRange","axisIncrement","totalRange","totalTopValues","rows","key","length","totalAxisValues","totalValuesLeftOfZero","totalValuesRightOfZero","axisFontSize","axisWidth","axisLines","direction","formatted","axisTitle","right","titleFormatter","titleLeft","titleRight","h1Left","h2Left","h1Right","h2Right","expandCollapseButtonText","expandCollapseButton","onClick","current","dangerouslySetInnerHTML","__html","buffer","paddingRight","overflowPadding","paddingLeft","titleHeight","visibility","marginLeft","marginRight","left","ref","gridTemplateRows","gridTemplateColumns","top","colorMap","color","naicsData","JSON","parse","bostonTotal","bostonData","forEach","naics_id","num_employ","industry","find","topLevelParentId","toString","parent_id","parseInt","console","error","Error","parentColor","c","push","title","name","newYorkTotal","newYorkData","sharesDataBoston","newYorkDatum","ny","difference","sharesDataNewYork","bostonDatum","bost","div","Input","input","parseFloat","toFixed","BostonNewYork3Digit","setValue","setHighlighted","primary","secondary","format","count","max","countText","toExpand","toCollapse","v","alert","Left","onSubmit","preventDefault","onChange","target","RapidTooltipRoot","getStandardTooltip","columnCount","r","row","alignment","boldColumns","includes","filteredPrimaryData","filteredSecondaryData","secondaryDatum","d2","primaryDatum","tooltipRef","node","secondaryValue","primaryValue","primaryDiff","secondaryDiff","innerHTML","rgba","display","setHovered","decimalToFraction","decimal","replace","bottom","pow","floor","gcd","a","b","Industries","ceil","data","filteredIndustryRCA","map","rca","min","scale","scaleLog","domain","range","nice","invert","highPresenceScale","lowPresenceScale","highPresenceData","lowPresenceData","Over","scaledValue","naicsId","App","exact","path","component","BostonAracaju6Digit","BostonAracaju2Digit","BostonAracaju1Digit","RCAComparison","BostonAracajuServicesOnly","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.effbfab7.chunk.js","sourcesContent":["import {keyframes} from 'styled-components/macro';\n\nexport interface WithDynamicFont {\n  $dynamicFont: string; // should be value of clamp\n}\n\nexport interface BarDatum {\n  id: string,\n  title: string,\n  value: number,\n  color: string,\n}\n\nexport enum Category {\n  Primary,\n  Secondary,\n}\n\nexport interface RowHoverEvent {\n  datum: BarDatum | undefined;\n  mouseCoords: {x: number, y: number};\n}\n\nexport enum Layout {\n  Left = 'left',\n  Right = 'right',\n}\n\nexport const fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n`;\n","import React, {useState, useRef, useEffect} from 'react';\nimport styled from 'styled-components/macro';\nimport orderBy from 'lodash/orderBy';\nimport raw from 'raw.macro';\nimport Row, {Cell, highlightedIdName} from './Row';\nimport {\n  WithDynamicFont,\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n  fadeIn,\n} from './Utils';\n\nconst ArrowCollapseSVG = raw('../assets/arrow-collapse.svg');\nconst ArrowExpandSVG = raw('../assets/arrow-expand.svg');\n\nconst baseTitleHeight = 80; // in px\nconst minimizedTitleHeight = 8; // in px\nconst overflowPadding = 1; // in rem. Needed to allow for final axis value to remain visible\n\ninterface WithTitleHeight {\n  $titleHeight: number;\n}\n\nconst Container = styled.div<WithTitleHeight>`\n  width: 100%;\n  height: 100%;\n  padding-top: ${({$titleHeight}) => $titleHeight}px;\n  padding-bottom: 2rem;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst ChartContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  /* makes this element the relative parent for position: fixed children */\n  will-change: transform;\n`;\n\nconst ChartBlock = styled.div`\n  grid-column: 1 / -1;\n  width: 100%;\n`;\n\nconst TitleRoot = styled.div<WithDynamicFont & WithTitleHeight>`\n  margin-left: auto;\n  display: flex;\n  height: ${({$titleHeight}) => $titleHeight}px;\n  position: absolute;\n  top: 1px;\n  font-size: 0.65rem;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n`;\n\nconst AxisLines = styled.div <WithTitleHeight>`\n  position: absolute;\n  top: ${({$titleHeight}) => $titleHeight}px;\n  width: 100%;\n  display: flex;\n`;\n\nconst TitleBase = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  box-sizing: border-box;\n`;\n\nconst TitleLeft = styled(TitleBase)`\n  border-right: solid 1px #333;\n  align-items: flex-end;\n  padding-right: 1.5rem;\n`;\n\nconst TitleRight = styled(TitleBase)`\n  border-left: solid 1px #333;\n  padding-left: 1.5rem;\n`;\n\nconst H1 = styled.h1`\n  font-size: inherit;\n  text-transform: uppercase;\n  margin: 0;\n  font-weight: 400;\n`;\nconst H2 = styled.h2`\n  font-size: inherit;\n  margin: 0;\n  font-weight: 400;\n`;\n\nconst Grid = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-row: 1;\n  display: grid;\n  position: relative;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  grid-template-columns: 1fr 2rem 200px;\n`;\n\nconst ExpandButtonRow = styled.div`\n  grid-column: 1 / -1;\n  pointer-events: none;\n  position: sticky;\n  right: 0;\n  height: 0;\n`;\n\nconst ButtonContainer = styled.div`\n  width: 100%;\n  pointer-events: none;\n  display: flex;\n`;\n\nconst ExpandButton = styled.button<WithDynamicFont & {$dynamicMaxWidth: string}>`\n  pointer-events: all;\n  margin-left: auto;\n  border: none;\n  background-color: transparent;\n  text-align: left;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  font-size: 0.7rem;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  max-width: ${({$dynamicMaxWidth}) => $dynamicMaxWidth};\n  text-shadow:\n   -1px -1px 0 #fff,  \n    1px -1px 0 #fff,\n    -1px 1px 0 #fff,\n     1px 1px 0 #fff;\n  transform: translate(0, 1rem);\n  opacity: 0;\n  animation: ${fadeIn} 0.1s linear 1 forwards;\n\n  &:focus:not(:focus-visible) {\n    outline: none;\n  }\n\n  &:active {\n    color: #333;\n  }\n`;\n\nconst Arrow = styled.span`\n  width: 1rem;\n  height: 1rem;\n  margin-left: 0.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    .cls-1 {\n      fill: none;\n      stroke: #2d2d2d;\n      stroke-miterlimit: 10;\n      stroke-width: 0.94px;\n    }\n\n    .cls-2 {\n      fill: #2d2d2d;\n    }\n  }\n\n`;\n\nconst AxisValue = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  background-color: #fff;\n  position: relative;\n  pointer-events: none;\n\n\n  &:after {\n    content: '';\n    width: 100%;\n    height: 0;\n    position: absolute;\n    bottom: 0;\n  }\n\n  &:not(:last-child) {\n    &:after {\n      border-bottom: solid 2px #333;\n      z-index: 10;\n    }\n  }\n\n  :last-child {\n    &:after {\n      border-bottom: solid 2px transparent;\n    }\n  }\n`;\n\nconst AxisText = styled.span<WithDynamicFont>`\n  font-size: 0.55rem;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  transform: translate(-50%, calc(100% + 4px));\n  position: absolute;\n  bottom: 0;\n`;\n\nconst AxisLine = styled.div`\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 0;\n  border-left: solid 1px #dfdfdf;\n`;\n\nconst AxisTitle = styled.div<WithDynamicFont>`\n  position: absolute;\n  bottom: 0;\n  z-index: 1;\n  font-size: 0.75rem;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  padding: 0 0 0.3rem 1rem;\n  box-sizing: border-box;\n  pointer-events: none;\n  transform: translate(-1rem, 0);\n`;\n\nexport enum Direction {\n  Over = 'over',\n  Under = 'under',\n}\n\nexport interface Props {\n  primaryData: BarDatum[];\n  secondaryData: BarDatum[];\n  nValuesToShow: number;\n  formatValue?: (value: number, direction: Direction) => string | number | React.ReactNode;\n  titles?: {\n    primary: string;\n    secondary: string;\n    format?: (label: string, count: number, max: number) => string;\n  }\n  expandCollapseText?: {\n    toExpand: string,\n    toCollapse: string,\n  }\n  axisLabel?: string;\n  onRowHover?: (event: RowHoverEvent) => void;\n  hideExpandCollapseButton?: boolean;\n  initialExpanded?: boolean;\n  layout?: Layout;\n  highlighted?: string;\n  onExpandCollapseButtonHover?: (event: React.MouseEvent<HTMLElement>) => void;\n  onHighlightError?: (value: string) => void;\n  numberOfXAxisTicks?: number;\n}\n\nconst roundUpToHalf = (value: number) => {\n  const roundedUp = Math.ceil(value);\n  const previousHalfValue = roundedUp - 0.5;\n  if (previousHalfValue <= value) {\n    return roundedUp;\n  } else {\n    return previousHalfValue;\n  }\n}\n\ninterface Measurements {\n  gridHeight: number,\n  chartWidth: number,\n  textWidth: number,\n  scrollWidth: number,\n}\n\nconst Root = (props: Props) => {\n  const {\n    primaryData, secondaryData, nValuesToShow, formatValue, titles, expandCollapseText,\n    axisLabel, onRowHover, hideExpandCollapseButton, initialExpanded, layout, highlighted,\n    onExpandCollapseButtonHover, onHighlightError, numberOfXAxisTicks,\n  } = props;\n\n  if (!primaryData.length && !secondaryData.length) {\n    return null;\n  }\n\n  const leftData = layout === Layout.Right ? primaryData : secondaryData;\n  const rightData = layout === Layout.Right ? secondaryData : primaryData;\n\n  const [expanded, setExpanded] = useState<boolean>(initialExpanded ? true : false);\n  const [{gridHeight, chartWidth, textWidth, scrollWidth}, setMeasurements] = useState<Measurements>({\n    gridHeight: 0, chartWidth: 0, textWidth: 0, scrollWidth: 0,\n  });\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const textRef = useRef<HTMLDivElement | null>(null);\n  const chartRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (rootRef && rootRef.current && chartRef && chartRef.current && textRef && textRef.current) {\n      const chartRect = chartRef.current.getBoundingClientRect();\n      const textRect = textRef.current.getBoundingClientRect();\n      const scrollWidth = rootRef.current.offsetWidth - rootRef.current.clientWidth;\n      setMeasurements({\n        gridHeight: rootRef.current.offsetHeight, chartWidth: chartRect.width, textWidth: textRect.width,\n        scrollWidth,\n      });\n    }\n  }, [rootRef, chartRef])\n\n  useEffect(() => {\n    const updateWindowWidth = () => {\n      if (rootRef && rootRef.current && chartRef && chartRef.current && textRef && textRef.current) {\n        const chartRect = chartRef.current.getBoundingClientRect();\n        const textRect = textRef.current.getBoundingClientRect();\n        const scrollWidth = rootRef.current.offsetWidth - rootRef.current.clientWidth;\n        setMeasurements({\n          gridHeight: rootRef.current.offsetHeight, chartWidth: chartRect.width, textWidth: textRect.width,\n          scrollWidth,\n        });\n      }\n    };\n    window.addEventListener('resize', updateWindowWidth);\n    return () => {\n      window.removeEventListener('resize', updateWindowWidth);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (rootRef && rootRef.current && highlighted !== undefined) {\n      const rootNode = rootRef.current;\n      const highlightedElm: HTMLElement | null = rootNode.querySelector(`#${highlightedIdName}`);\n      if (highlightedElm) {\n        const highlightedRect = highlightedElm.getBoundingClientRect();\n        if (highlightedRect.height > 5) { // > arbitrary number in case function is triggered during animation\n          highlightedElm.scrollIntoView({behavior: \"smooth\"});\n        } else {\n          setExpanded(true)\n          const scrollToElm = () => {\n            setTimeout(() => {\n              highlightedElm.scrollIntoView({behavior: \"smooth\"});\n              highlightedElm.removeEventListener('transitionend', scrollToElm)\n            }, 250);\n          }\n          highlightedElm.addEventListener('transitionend', scrollToElm)\n        }\n      } else if (onHighlightError) {\n        onHighlightError(highlighted);\n      }\n    }\n  }, [rootRef, highlighted]);\n\n  const orderedRightData = orderBy(rightData, ['value'], 'desc');\n  const orderedLeftData = orderBy(leftData, ['value'], 'desc');\n\n  const rightTop = orderedRightData.slice(0, nValuesToShow);\n  const leftTop = orderedLeftData.slice(0, nValuesToShow);\n\n  let rightTopValue = rightTop.length ? rightTop[0].value : 0;\n  let leftTopValue = leftTop.length ? leftTop[0].value : 0;\n  if (!rightTopValue) {\n    rightTopValue = leftTopValue;\n  }\n  if (!leftTopValue) {\n    leftTopValue = rightTopValue;\n  }\n  if (!leftTopValue && !rightTopValue) {\n    rightTopValue = 1;\n    leftTopValue = 1;\n  }\n  // If either side is too big, scale to be half size\n  if (rightTopValue < leftTopValue * 0.5) {\n    rightTopValue = leftTopValue / 2;\n  }\n  if (leftTopValue < rightTopValue * 0.5) {\n    leftTopValue = rightTopValue / 2;\n  }\n\n  const rawTotalRange = rightTopValue + leftTopValue;\n  let rightMax: number;\n  let leftMax: number;\n  let axisIncrement: number;\n  if (numberOfXAxisTicks) {\n    rightMax = 100;\n    leftMax = 100;\n    axisIncrement = 200 / numberOfXAxisTicks;\n  } else if (rawTotalRange < 7) {\n    rightMax = roundUpToHalf(rightTopValue);\n    leftMax = roundUpToHalf(leftTopValue);\n    axisIncrement = 0.5;\n  } else if (rawTotalRange < 14) {\n    rightMax = Math.ceil(rightTopValue);\n    leftMax = Math.ceil(leftTopValue);\n    axisIncrement = 1;\n  } else if (rawTotalRange < 21) {\n    rightMax = 2 * Math.ceil(rightTopValue / 2);\n    leftMax = 2 * Math.ceil(leftTopValue / 2);\n    axisIncrement = 2;\n  } else if (rawTotalRange < 35) {\n    rightMax = 3 * Math.ceil(rightTopValue / 3);\n    leftMax = 3 * Math.ceil(leftTopValue / 3);\n    axisIncrement = 3;\n  }  else if (rawTotalRange < 60) {\n    rightMax = 5 * Math.ceil(rightTopValue / 5);\n    leftMax = 5 * Math.ceil(leftTopValue / 5);\n    axisIncrement = 5;\n  } else {\n    rightMax = 10 * Math.ceil(rightTopValue / 10);\n    leftMax = 10 * Math.ceil(leftTopValue / 10);\n    axisIncrement = 10;\n  }\n\n  const totalRange = rightMax + leftMax;\n  const leftRange = leftMax / totalRange * 100\n  const rightRange = rightMax / totalRange * 100\n\n  const totalValues = rightData.length + leftData.length;\n  const totalTopValues = rightTop.length + leftTop.length;\n  const rowHeight = gridHeight ? ((1 / totalTopValues) * gridHeight) : 0;\n\n  const rows = [...orderedRightData, ...orderedLeftData.reverse()].map((d, i) => {\n    return (\n      <Row\n        key={d.id}\n        i={i}\n        d={d}\n        expanded={expanded}\n        totalRightValues={rightTop.length}\n        totalLeftValues={leftTop.length}\n        totalValues={totalValues}\n        rowHeight={rowHeight}\n        orderedRightData={orderedRightData}\n        gridHeight={gridHeight}\n        rightMax={rightMax}\n        leftMax={leftMax}\n        onRowHover={onRowHover}\n        leftRange={leftRange}\n        rightRange={rightRange}\n        layout={layout}\n        highlighted={highlighted}\n        textWidth={textWidth}\n        chartWidth={chartWidth}\n      />\n    );\n  })\n\n  if (layout === Layout.Right) {\n    rows.reverse();\n  }\n\n  const totalAxisValues = totalRange / axisIncrement;\n  const totalValuesLeftOfZero = Math.round((leftRange / 100) * totalAxisValues);\n  const totalValuesRightOfZero = totalAxisValues - totalValuesLeftOfZero;\n\n  let axisFontSize: string;\n  if (chartWidth < gridHeight) {\n    axisFontSize = `clamp(0.55rem, ${chartWidth * 0.025}px, 1rem)`;\n  } else {\n    axisFontSize = `clamp(0.55rem, ${gridHeight * 0.025}px, 1rem)`;\n  }\n  const axisWidth = chartWidth / totalAxisValues;\n\n  const axisLines: React.ReactElement<any>[] = [];\n  for (let i = totalValuesLeftOfZero + 1; i > 0; i--) {\n    const value = axisIncrement * i; \n    const direction = layout === Layout.Right ? Direction.Over : Direction.Under;\n    if (value <= leftMax) {\n      const formatted = formatValue ? formatValue(value, direction) : value;\n      axisLines.push(\n        <AxisValue\n          key={'axis-line-left-' + i}\n          style={{width: axisWidth}}\n          className={'react-comparison-bar-chart-axis-value'}\n        >\n          <AxisText\n            $dynamicFont={axisFontSize}\n          >\n            {formatted}\n          </AxisText>\n          <AxisLine />\n        </AxisValue>\n      );\n    }\n  }\n\n  for (let i = 0; i < totalValuesRightOfZero + 1; i++) {\n    const value = axisIncrement * i;\n    const direction = layout === Layout.Right ? Direction.Under : Direction.Over;\n    if (value <= rightMax) {\n      const formatted = formatValue ? formatValue(value, direction) : value;\n      axisLines.push(\n        <AxisValue\n          key={'axis-line-right-' + i}\n          style={{width: axisWidth}}\n          className={'react-comparison-bar-chart-axis-value'}\n        >\n          <AxisText\n            $dynamicFont={axisFontSize}\n          >\n            {formatted}\n          </AxisText>\n          <AxisLine />\n        </AxisValue>\n      );\n    }\n  }\n\n  const axisTitle = axisLabel ? (\n    <AxisTitle\n      style={{\n        width: layout !== Layout.Right ? (rightRange / 100) * chartWidth : (leftRange / 100) * chartWidth,\n        right: layout !== Layout.Right ? 0 : undefined,\n        textAlign: layout !== Layout.Right ? 'right' : undefined,\n      }}\n      className={'react-comparison-bar-chart-axis-title'}\n      $dynamicFont={`clamp(0.75rem, ${chartWidth * 0.025}px, 1.1rem)`}\n    >\n      {axisLabel}\n    </AxisTitle>\n  ) : null;\n\n  const titleFormatter = titles && titles.format ? titles.format : (label: string) => label;\n\n  let titleLeft: string | undefined;\n  let titleRight: string | undefined;\n  if (layout === Layout.Right) {\n    titleLeft = titles && titles.primary ? titles.primary : undefined;\n    titleRight = titles && titles.secondary ? titles.secondary : undefined;\n  } else {\n    titleLeft = titles && titles.secondary ? titles.secondary : undefined;\n    titleRight = titles && titles.primary ? titles.primary : undefined;\n  }\n\n  const h1Left = titleLeft ? (\n    <H1>{titleFormatter(titleLeft, leftTop.length, orderedLeftData.length)}</H1>\n  ) : null;\n  const h2Left = titleLeft && titleRight ? (\n    <H2>{titleLeft} {'>'} {titleRight}</H2>\n  ) : null;\n  const h1Right = titles && titleRight ? (\n    <H1>{titleFormatter(titleRight, rightTop.length, orderedRightData.length)}</H1>\n  ) : null;\n  const h2Right = titleLeft && titleRight ? (\n    <H2>{titleRight} {'>'} {titleLeft}</H2>\n  ) : null; \n\n  let expandCollapseButtonText: string;\n  if (expanded) {\n    expandCollapseButtonText = expandCollapseText ? expandCollapseText.toCollapse : 'Collapse';\n  } else {\n    expandCollapseButtonText = expandCollapseText ? expandCollapseText.toExpand : 'Expand';\n  }\n\n  const expandCollapseButton = hideExpandCollapseButton ||\n    (rightTop.length < nValuesToShow && leftTop.length < nValuesToShow)\n    ? null : (\n      <ButtonContainer>\n        <ExpandButton\n          onClick={() => setExpanded(current => !current)}\n          className={'react-comparison-bar-chart-expand-button'}\n          style={{\n          }}\n          $dynamicFont={`clamp(0.7rem, ${chartWidth * 0.015}px, 0.85rem)`}\n          $dynamicMaxWidth={chartWidth > 300 ? `${chartWidth * 0.25}px` : '75px'}\n          onMouseMove={onExpandCollapseButtonHover}\n        >\n          <Arrow\n            dangerouslySetInnerHTML={{__html: expanded ? ArrowCollapseSVG : ArrowExpandSVG}}\n          /> {expandCollapseButtonText}\n        </ExpandButton>\n      </ButtonContainer>\n    );\n\n  const buffer: React.CSSProperties = layout !== Layout.Right\n    ? {paddingRight: overflowPadding + 'rem'} : {paddingLeft: overflowPadding + 'rem'};\n  \n  const titleHeight = titleLeft || titleRight ? baseTitleHeight : minimizedTitleHeight;\n\n  return (\n    <Container\n      style={{...buffer}}\n      className={'react-comparison-bar-chart-root-container'}\n      $titleHeight={titleHeight}\n    >\n      <TitleRoot\n        style={{\n          width: chartWidth,\n          visibility: chartWidth ? undefined : 'hidden',\n          marginLeft: layout !== Layout.Right ? undefined : 0,\n          marginRight: scrollWidth,\n          right: layout !== Layout.Right ? 0 : undefined,\n          left: layout !== Layout.Right ? undefined : 0,\n          ...buffer,\n        }}\n        $dynamicFont={`clamp(0.65rem, ${chartWidth * 0.023}px, 0.87rem)`}\n        $titleHeight={titleHeight}\n      >\n        <TitleLeft style={{width: `${leftRange}%`}}>\n          <div className={'react-comparison-bar-chart-title react-comparison-bar-chart-title-left'}>\n            {h1Left}\n            {h2Left}\n          </div>\n        </TitleLeft>\n        <TitleRight style={{width: `${rightRange}%`}}>\n          <div className={'react-comparison-bar-chart-title react-comparison-bar-chart-title-right'}>\n            {h1Right}\n            {h2Right}\n          </div>\n        </TitleRight>\n        <AxisLines\n          style={{height: gridHeight}}\n          $titleHeight={titleHeight}\n        >\n          {axisTitle}\n          {axisLines}\n        </AxisLines>\n      </TitleRoot>\n      <ChartContainer>\n        <Grid\n          ref={rootRef}\n          style={{\n            gridTemplateRows: 'repeat(${totalValues}, auto)',\n            gridTemplateColumns: layout !== Layout.Right\n              ? 'clamp(75px, 300px, 15%) 2rem 1fr'\n              : '1fr 2rem clamp(75px, 300px, 15%)',\n          }}\n          className={'react-comparison-bar-chart-grid'}\n        >\n          <ExpandButtonRow\n            style={{\n              top: (gridHeight / 2),\n              width: layout !== Layout.Right ? undefined : chartWidth,\n              visibility: chartWidth ? undefined : 'hidden',\n            }}\n            className={'react-comparison-bar-chart-expand-button-container'}\n          >\n            {expandCollapseButton}\n          </ExpandButtonRow>\n          <Cell\n            ref={layout !== Layout.Right ? textRef : chartRef}\n          />\n          <Cell />\n          <Cell\n            ref={layout !== Layout.Right ? chartRef : textRef}\n          />\n          <ChartBlock>\n            {rows}\n          </ChartBlock>\n        </Grid>\n      </ChartContainer>\n    </Container>\n  );\n}\n\nexport default Root;\n","import React from 'react';\nimport styled from 'styled-components/macro';\nimport {\n  WithDyanmicFont,\n  BarDatum,\n  Category,\n  RowHoverEvent,\n  Layout,\n  fadeIn,\n} from './Utils';\n\nexport const highlightedIdName = 'react-comparison-bar-chart-highlighted-item';\n\nconst Root = styled.div`\n  display: flex;\n\n  &:hover {\n    background-color: #f1f1f1;\n  }\n`;\n\nconst LabelText = styled.div<WithDyanmicFont>`\n  width: 100%;\n  font-size: 0.68rem;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0;\n  animation: ${fadeIn} 0.15s linear 1 forwards 0.3s;\n`;\n\nexport const Cell = styled.div`\n  transition: height 0.3s ease-in-out;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n`;\n\nconst BarCell = styled(Cell)`\n  display: flex;\n`;\n\nconst RangeBase = styled.div`\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n`;\n\nconst RangeLeft = styled(RangeBase)`\n  border-right: solid 1px #333;\n  justify-content: flex-end;\n`;\n\nconst RangeRight = styled(RangeBase)`\n  border-left: solid 1px #333;\n`;\n\nconst Bar = styled.div`\n  height: 70%;\n  transition: width 0.2s ease-in-out;\n`;\n\ninterface Props {\n  i: number;\n  d: BarDatum;\n  expanded: boolean;\n  totalRightValues: number;\n  totalLeftValues: number;\n  totalValues: number;\n  rowHeight: number;\n  orderedRightData: BarDatum[];\n  gridHeight: number;\n  rightMax: number;\n  leftMax: number;\n  onRowHover: undefined | ((event: RowHoverEvent) => void);\n  leftRange: number;\n  rightRange: number;\n  layout: Layout | undefined;\n  highlighted: string | undefined;\n  chartWidth: number;\n  textWidth: number;\n}\n\nconst Row = (props: Props) => {\n  const {\n    i, d, expanded, totalRightValues, totalLeftValues, rowHeight, totalValues, gridHeight,\n    orderedRightData, rightMax, leftMax, onRowHover,\n    leftRange, rightRange, layout, highlighted, chartWidth, textWidth,\n  } = props;\n\n  \n  const isRowVisible = expanded || (i < totalRightValues || i > totalValues - (totalLeftValues + 1));\n  const category: Category = i < orderedRightData.length ? Category.Primary : Category.Secondary;\n  const style: React.CSSProperties = isRowVisible ? {\n    height: rowHeight,\n    backgroundColor: highlighted === d.id ? '#f1f1f1' : undefined,\n  } : {\n    height: 0,\n    pointerEvents: 'none',\n    transitionDelay: !highlighted ? '0.15s' : undefined,\n  };\n  const label = isRowVisible ? (\n    <LabelText\n      className={'react-comparison-bar-chart-row-label'}\n      style={{\n        textAlign: layout === Layout.Right ? 'left' : 'right',\n      }}\n      $dynamicFont={`clamp(0.5rem, ${gridHeight * 0.04}px, 0.9rem)`}\n    >\n      {d.title}\n    </LabelText>\n  ) : null;\n  const leftBar = category === Category.Secondary ? (\n    <Bar\n      className={'react-comparison-bar-chart-bar react-comparison-bar-chart-bar-left'}\n      style={{\n        backgroundColor: d.color,\n        width: isRowVisible ? `${d.value / leftMax * 100}%` : 0,\n        transitionDelay: isRowVisible && !highlighted ? '0.3s' : undefined,\n      }}\n      role={isRowVisible ? 'graphics-symbol' : undefined}\n      aria-label={isRowVisible ? `${d.value / leftMax * 100}%` : undefined}\n    />\n  ) : null;\n  const rightBar = category === Category.Primary ? (\n    <Bar\n      className={'react-comparison-bar-chart-bar react-comparison-bar-chart-bar-right'}\n      style={{\n        backgroundColor: d.color,\n        width: isRowVisible ? `${d.value / rightMax * 100}%` : 0,\n        transitionDelay: isRowVisible && !highlighted ? '0.3s' : undefined,\n      }}\n      role={isRowVisible ? 'graphics-symbol' : undefined}\n      aria-label={isRowVisible ? `${d.value / rightMax * 100}%` : undefined}\n    />\n  ) : null;\n  const onMouseMove = (e: React.MouseEvent) => {\n    if (onRowHover) {\n      onRowHover({\n        datum: d,\n        mouseCoords: {\n          x: e.clientX,\n          y: e.clientY,\n        },\n      })\n    }\n  }\n\n  const onMouseLeave = (e: React.MouseEvent) => {\n    if (onRowHover) {\n      onRowHover({\n        datum: undefined,\n        mouseCoords: {\n          x: e.clientX,\n          y: e.clientY,\n        },\n      })\n    }\n  }\n\n  if (layout === Layout.Right) {\n    return (\n      <Root>\n        <BarCell\n          id={highlighted === d.id ? highlightedIdName : undefined}\n          style={{...style, width: chartWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <RangeLeft style={{width: `${leftRange}%`}}>\n            {leftBar}\n          </RangeLeft>\n          <RangeRight style={{width: `${rightRange}%`}}>\n            {rightBar}\n          </RangeRight>\n        </BarCell>\n        <Cell\n          style={{...style, width: '2rem'}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        />\n        <Cell\n          style={{...style, width: textWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          {label}\n        </Cell>\n      </Root>\n    );\n  } else {\n    return (\n      <Root>\n        <Cell\n          style={{...style, width: textWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          {label}\n        </Cell>\n        <Cell\n          style={{...style, width: '2rem'}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        />\n        <BarCell\n          id={highlighted === d.id ? highlightedIdName : undefined}\n          style={{...style, width: chartWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <RangeLeft style={{width: `${leftRange}%`}}>\n            {leftBar}\n          </RangeLeft>\n          <RangeRight style={{width: `${rightRange}%`}}>\n            {rightBar}\n          </RangeRight>\n        </BarCell>\n      </Root>\n    );\n  }\n\n}\n\nexport default React.memo(Row);\n","import React from 'react'\nimport Root, {\n  Props as ComparisonBarChartProps,\n  Direction,\n} from './components/Root';\nimport {\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n} from './components/Utils';\n\nconst ComparisonBarChart = (props: ComparisonBarChartProps) => {\n  return (\n    <Root {...props} />\n  );\n}\n\nexport {\n  ComparisonBarChartProps,\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n  Direction,\n}\n\nexport default ComparisonBarChart;\n","import React, {useState} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  Layout,\n} from 'react-comparison-bar-chart';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\n\nconst colorMap = [\n  { id: '0', color: '#A973BE' },\n  { id: '1', color: '#F1866C' },\n  { id: '2', color: '#FFC135' },\n  { id: '3', color: '#93CFD0' },\n  { id: '4', color: '#488098' },\n  { id: '5', color: '#77C898' },\n  { id: '6', color: '#6A6AAD' },\n  { id: '7', color: '#D35162' },\n  { id: '8', color: '#F28188' },\n]\n\ninterface NaicsDatum {\n  naics_id: number,\n  code: string,\n  name: string,\n  level: number,\n  parent_id: number | null,\n  parent_code: string | null,\n  code_hierarchy: string,\n  naics_id_hierarchy: string,\n}\n\nconst naicsData: NaicsDatum[] = JSON.parse(raw('../data/naics_2017.json'));\n\nlet bostonTotal = 0;\nconst bostonData: BarDatum[] = [];\nJSON.parse(raw('../data/boston-3digit-shares.json'))\n  .forEach(({naics_id, num_employ}: {naics_id: number, num_employ: number}) => {\n    const industry = naicsData.find(d => d.naics_id === naics_id);\n    let topLevelParentId: string = naics_id.toString();\n    let current: NaicsDatum | undefined = naicsData.find(datum => datum.naics_id === naics_id);\n    while(current && current.parent_id !== null) {\n      // eslint-disable-next-line\n      current = naicsData.find(datum => datum.naics_id === (current as NaicsDatum).parent_id);\n      if (current && current.parent_id !== null) {\n        topLevelParentId = current.parent_id.toString();\n      } else if (current && current.naics_id !== null) {\n        topLevelParentId = current.naics_id.toString();\n      }\n    }\n    if (parseInt(topLevelParentId, 10) > 8) {\n      console.error(current);\n      throw new Error('Parent out of range')\n    }\n    const parentColor = colorMap.find(c => c.id === topLevelParentId);\n    if (industry && parentColor) {\n      bostonTotal += num_employ;\n      bostonData.push({\n        id: naics_id.toString(),\n        title: industry.name,\n        value: num_employ,\n        color: parentColor.color,\n      })\n    }\n  });\n\nlet newYorkTotal = 0;\nconst newYorkData: BarDatum[] = [];\nJSON.parse(raw('../data/newyork-3digit-shares.json'))\n  .forEach(({naics_id, num_employ}: {naics_id: number, num_employ: number}) => {\n    const industry = naicsData.find(d => d.naics_id === naics_id);\n    let topLevelParentId: string = naics_id.toString();\n    let current: NaicsDatum | undefined = naicsData.find(datum => datum.naics_id === naics_id);\n    while(current && current.parent_id !== null) {\n      // eslint-disable-next-line\n      current = naicsData.find(datum => datum.naics_id === (current as NaicsDatum).parent_id);\n      if (current && current.parent_id !== null) {\n        topLevelParentId = current.parent_id.toString();\n      } else if (current && current.naics_id !== null) {\n        topLevelParentId = current.naics_id.toString();\n      }\n    }\n    if (parseInt(topLevelParentId, 10) > 8) {\n      console.error(current);\n      throw new Error('Parent out of range')\n    }\n    const parentColor = colorMap.find(c => c.id === topLevelParentId);\n    if (industry && parentColor) {\n      newYorkTotal += num_employ;\n      newYorkData.push({\n        id: naics_id.toString(),\n        title: industry.name,\n        value: num_employ,\n        color: parentColor.color,\n      })\n    }\n  });\n\nconst sharesDataBoston: BarDatum[] = [];\nbostonData.forEach(d => {\n  const newYorkDatum = newYorkData.find(ny => ny.id === d.id);\n  const bostonShare = d.value / bostonTotal;\n  const newYorkShare = newYorkDatum ? newYorkDatum.value / newYorkTotal : 0;\n  const difference = bostonShare - newYorkShare;\n  if (difference > 0) {\n    sharesDataBoston.push({...d, value: difference * 100})\n  }\n});\nconst sharesDataNewYork: BarDatum[] = [];\nnewYorkData.forEach(d => {\n  const bostonDatum = bostonData.find(bost => bost.id === d.id);\n  const newYorkShare = d.value / newYorkTotal;\n  const bostonShare = bostonDatum ? bostonDatum.value / bostonTotal : 0;\n  const difference = newYorkShare - bostonShare;\n  if (difference > 0) {\n    sharesDataNewYork.push({...d, value: difference * 100})\n  }\n});\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst Input = styled.input`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nconst formatValue = (value: number) => {\n  return parseFloat((value).toFixed(1)) + '%';\n}\n\nconst BostonNewYork3Digit = () => {\n  const [value, setValue] = useState<string>('');\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n\n  const titleFormatter = (label: string, count: number, max: number) => {\n    const countText = count === max ? '' : `(Top ${count})`;\n    return `Positive ${label} share (%) ${countText}`;\n  }\n\n  const onSubmit = (e: any) => {\n    e.preventDefault();\n    setHighlighted(value.length ? value : undefined);\n  }\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={sharesDataBoston}\n        secondaryData={sharesDataNewYork}\n        nValuesToShow={10}\n        formatValue={formatValue}\n        titles={{\n          primary: 'Boston',\n          secondary: 'New York',\n          format: titleFormatter,\n        }}\n        expandCollapseText={{\n          toExpand: 'Click to see all industries',\n          toCollapse: 'Show only top industries',\n        }}\n        axisLabel={'Difference in Share'}\n        highlighted={highlighted}\n        onHighlightError={v => alert('Could not find ' + v)}\n        layout={Layout.Left}\n      />\n      <form\n        onSubmit={onSubmit}\n      >\n        <Input\n          value={value}\n          onChange={e => setValue(e.target.value)}\n        />\n      </form>\n    </Root>\n  )\n}\n\nexport default BostonNewYork3Digit;\n","import styled from 'styled-components/macro';\n\ninterface Input {\n  title: string;\n  color: string;\n  rows: string[][];\n  boldColumns?: number[];\n}\n\nexport const RapidTooltipRoot = styled.div`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  padding-bottom: 0.5rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  transition: opacity 0.15s ease;\n  color: #333;\n  background-color: #fff;\n  border: 1px solid #dfdfdf;\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1.5rem));\n  display: none;\n`;\n\nexport const getStandardTooltip = (input: Input) => {\n  const columnCount = input.rows.length && input.rows[0].length ? input.rows[0].length : 1;\n\n  let rows: string = '';\n  input.rows.forEach(r => {\n    let row = '';\n    r.forEach((c, i) => {\n      const alignment = i === 0\n        ? 'justify-content: flex-start; text-align: left;'\n        : 'justify-content: flex-end; text-align: right;';\n      const style = input.boldColumns && input.boldColumns.includes(i)\n        ? `style=\"font-weight: 600;${alignment}\"` : '';\n      row = row + `<div class=\"rapid-tooltip-cell\" ${style}>${c}</div>`;\n    });\n    rows = rows + row;\n  });\n\n  return `\n    <div>\n      <div class=\"rapid-tooltip-title\" style=\"background-color: ${input.color};\">\n        ${input.title}\n      </div>\n      <div\n        class=\"rapid-tooltip-subsection-grid\"\n        style=\"display: grid; grid-template-columns: repeat(${columnCount}, auto);\"\n      >\n        ${rows}\n      </div>\n    </div>\n    <div class=\"rapid-tooltip-arrow-container\">\n      <div class=\"rapid-tooltip-arrow\"></div>\n    </div>\n  `;\n};","import React, {useRef} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n} from 'react-comparison-bar-chart';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\nimport {rgba} from 'polished';\nimport {getStandardTooltip, RapidTooltipRoot} from './rapidTooltip';\n\nconst primaryTotal = 169706;\nconst secondaryTotal = 57741;\n\ninterface FilteredDatum {\n  id: string;\n  title: string;\n  value: number;\n  color: string;\n  topLevelParentId: string;\n}\n\nconst {\n  filteredPrimaryData, filteredSecondaryData,\n}: {\n  filteredPrimaryData: FilteredDatum[], filteredSecondaryData: FilteredDatum[],\n} = JSON.parse(raw('../data/boston-aracaju-6-digit-data.json'));\n\nconst primaryData: BarDatum[] = [];\nconst secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach(d => {\n    const secondaryDatum = filteredSecondaryData.find(d2 => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum ? secondaryDatum.value / secondaryTotal : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({...d, value: difference * 100});\n    }\n  });\n  filteredSecondaryData.forEach(d => {\n    const primaryDatum = filteredPrimaryData.find(d2 => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({...d, value: difference * 100});\n    }\n  });\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst formatValue = (value: number) => {\n  return parseFloat((value).toFixed(1)) + '%';\n}\n\nconst BostonNewYork3Digit = () => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const {datum, mouseCoords} = e;\n        const primaryDatum = filteredPrimaryData.find(d => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(d => d.id === datum.id);\n        const secondaryValue = secondaryDatum ? secondaryDatum.value / secondaryTotal * 100 : 0;\n        const primaryValue = primaryDatum ? primaryDatum.value / primaryTotal * 100 : 0;\n        const primaryDiff = primaryValue > secondaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        const secondaryDiff = secondaryValue > primaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            ['', 'Aracaju', 'Boston'],\n            ['Share of Employees', secondaryValue.toFixed(2) + '%', primaryValue.toFixed(2) + '%'],\n            ['Difference', secondaryDiff, primaryDiff],\n          ],\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  const titleFormatter = (label: string, count: number, max: number) => {\n    const countText = count === max ? '' : `(Top ${count})`;\n    return `Positive ${label} share (%) ${countText}`;\n  }\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatValue}\n        titles={{\n          primary: 'Boston',\n          secondary: 'Aracaju',\n          format: titleFormatter,\n        }}\n        expandCollapseText={{\n          toExpand: 'Click to see all industries',\n          toCollapse: 'Show only top industries',\n        }}\n        axisLabel={'Difference in Share'}\n        onRowHover={e => setHovered(e)}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  )\n}\n\nexport default BostonNewYork3Digit;\n","import React, {useRef} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n} from 'react-comparison-bar-chart';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\nimport {rgba} from 'polished';\nimport {getStandardTooltip, RapidTooltipRoot} from './rapidTooltip';\n\nconst primaryTotal = 169706;\nconst secondaryTotal = 57741;\n\ninterface FilteredDatum {\n  id: string;\n  title: string;\n  value: number;\n  color: string;\n  topLevelParentId: string;\n}\n\nconst {\n  filteredPrimaryData, filteredSecondaryData,\n}: {\n  filteredPrimaryData: FilteredDatum[], filteredSecondaryData: FilteredDatum[],\n} = JSON.parse(raw('../data/boston-aracaju-2-digit-data.json'));\n\nconst primaryData: BarDatum[] = [];\nconst secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach(d => {\n    const secondaryDatum = filteredSecondaryData.find(d2 => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum ? secondaryDatum.value / secondaryTotal : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({...d, value: difference * 100});\n    }\n  });\n  filteredSecondaryData.forEach(d => {\n    const primaryDatum = filteredPrimaryData.find(d2 => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({...d, value: difference * 100});\n    }\n  });\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst formatValue = (value: number) => {\n  return parseFloat((value).toFixed(1)) + '%';\n}\n\nconst BostonNewYork3Digit = () => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const {datum, mouseCoords} = e;\n        const primaryDatum = filteredPrimaryData.find(d => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(d => d.id === datum.id);\n        const secondaryValue = secondaryDatum ? secondaryDatum.value / secondaryTotal * 100 : 0;\n        const primaryValue = primaryDatum ? primaryDatum.value / primaryTotal * 100 : 0;\n        const primaryDiff = primaryValue > secondaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        const secondaryDiff = secondaryValue > primaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            ['', 'Aracaju', 'Boston'],\n            ['Share of Employees', secondaryValue.toFixed(2) + '%', primaryValue.toFixed(2) + '%'],\n            ['Difference', secondaryDiff, primaryDiff],\n          ],\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  const titleFormatter = (label: string, count: number, max: number) => {\n    const countText = count === max ? '' : `(Top ${count})`;\n    return `Positive ${label} share (%) ${countText}`;\n  }\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatValue}\n        titles={{\n          primary: 'Boston',\n          secondary: 'Aracaju',\n          format: titleFormatter,\n        }}\n        expandCollapseText={{\n          toExpand: 'Click to see all industries',\n          toCollapse: 'Show only top industries',\n        }}\n        axisLabel={'Difference in Share'}\n        onRowHover={e => setHovered(e)}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  )\n}\n\nexport default BostonNewYork3Digit;\n","import React, {useRef} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n} from 'react-comparison-bar-chart';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\nimport {rgba} from 'polished';\nimport {getStandardTooltip, RapidTooltipRoot} from './rapidTooltip';\n\nconst primaryTotal = 169706;\nconst secondaryTotal = 57741;\n\ninterface FilteredDatum {\n  id: string;\n  title: string;\n  value: number;\n  color: string;\n  topLevelParentId: string;\n}\n\nconst {\n  filteredPrimaryData, filteredSecondaryData,\n}: {\n  filteredPrimaryData: FilteredDatum[], filteredSecondaryData: FilteredDatum[],\n} = JSON.parse(raw('../data/boston-aracaju-1-digit-data.json'));\n\nconst primaryData: BarDatum[] = [];\nconst secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach(d => {\n    const secondaryDatum = filteredSecondaryData.find(d2 => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum ? secondaryDatum.value / secondaryTotal : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({...d, value: difference * 100});\n    }\n  });\n  filteredSecondaryData.forEach(d => {\n    const primaryDatum = filteredPrimaryData.find(d2 => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({...d, value: difference * 100});\n    }\n  });\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst formatValue = (value: number) => {\n  return parseFloat((value).toFixed(1)) + '%';\n}\n\nconst BostonNewYork3Digit = () => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const {datum, mouseCoords} = e;\n        const primaryDatum = filteredPrimaryData.find(d => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(d => d.id === datum.id);\n        const secondaryValue = secondaryDatum ? secondaryDatum.value / secondaryTotal * 100 : 0;\n        const primaryValue = primaryDatum ? primaryDatum.value / primaryTotal * 100 : 0;\n        const primaryDiff = primaryValue > secondaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        const secondaryDiff = secondaryValue > primaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            ['', 'Aracaju', 'Boston'],\n            ['Share of Employees', secondaryValue.toFixed(2) + '%', primaryValue.toFixed(2) + '%'],\n            ['Difference', secondaryDiff, primaryDiff],\n          ],\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  const titleFormatter = (label: string, count: number, max: number) => {\n    const countText = count === max ? '' : `(Top ${count})`;\n    return `Positive ${label} share (%) ${countText}`;\n  }\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatValue}\n        titles={{\n          primary: 'Boston',\n          secondary: 'Aracaju',\n          format: titleFormatter,\n        }}\n        expandCollapseText={{\n          toExpand: 'Click to see all industries',\n          toCollapse: 'Show only top industries',\n        }}\n        axisLabel={'Difference in Share'}\n        onRowHover={e => setHovered(e)}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  )\n}\n\nexport default BostonNewYork3Digit;\n","import React, {useRef} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n} from 'react-comparison-bar-chart';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\nimport {rgba} from 'polished';\nimport {getStandardTooltip, RapidTooltipRoot} from './rapidTooltip';\n\nconst primaryTotal = 169706;\nconst secondaryTotal = 57741;\n\ninterface FilteredDatum {\n  id: string;\n  title: string;\n  value: number;\n  color: string;\n  topLevelParentId: string;\n}\n\nconst {\n  filteredPrimaryData, filteredSecondaryData,\n}: {\n  filteredPrimaryData: FilteredDatum[], filteredSecondaryData: FilteredDatum[],\n} = JSON.parse(raw('../data/boston-aracaju-services-only-data.json'));\n\nconst primaryData: BarDatum[] = [];\nconst secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach(d => {\n    const secondaryDatum = filteredSecondaryData.find(d2 => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum ? secondaryDatum.value / secondaryTotal : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({...d, value: difference * 100});\n    }\n  });\n  filteredSecondaryData.forEach(d => {\n    const primaryDatum = filteredPrimaryData.find(d2 => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({...d, value: difference * 100});\n    }\n  });\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst formatValue = (value: number) => {\n  return parseFloat((value).toFixed(1)) + '%';\n}\n\nconst BostonNewYork3Digit = () => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const {datum, mouseCoords} = e;\n        const primaryDatum = filteredPrimaryData.find(d => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(d => d.id === datum.id);\n        const secondaryValue = secondaryDatum ? secondaryDatum.value / secondaryTotal * 100 : 0;\n        const primaryValue = primaryDatum ? primaryDatum.value / primaryTotal * 100 : 0;\n        const primaryDiff = primaryValue > secondaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        const secondaryDiff = secondaryValue > primaryValue ? '+' + datum.value.toFixed(2) + '%' : '';\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            ['', 'Aracaju', 'Boston'],\n            ['Share of Employees', secondaryValue.toFixed(2) + '%', primaryValue.toFixed(2) + '%'],\n            ['Difference', secondaryDiff, primaryDiff],\n          ],\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  const titleFormatter = (label: string, count: number, max: number) => {\n    const countText = count === max ? '' : `(Top ${count})`;\n    return `Positive ${label} share (%) ${countText}`;\n  }\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatValue}\n        titles={{\n          primary: 'Boston',\n          secondary: 'Aracaju',\n          format: titleFormatter,\n        }}\n        expandCollapseText={{\n          toExpand: 'Click to see all industries',\n          toCollapse: 'Show only top industries',\n        }}\n        axisLabel={'Difference in Share'}\n        onRowHover={e => setHovered(e)}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  )\n}\n\nexport default BostonNewYork3Digit;\n","import React, { useRef } from 'react';\nimport ComparisonBarChart, {\n  Direction,\n  RowHoverEvent,\n} from 'react-comparison-bar-chart';\nimport { getStandardTooltip, RapidTooltipRoot } from './rapidTooltip';\nimport { rgba } from 'polished';\nimport data from '../data/rca-comparison.json';\nimport styled from 'styled-components';\nimport { scaleLog } from 'd3-scale';\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nfunction gcd(a: number, b: number): number {\n  return (b) ? gcd(b, a % b) : a;\n}\n\nexport const decimalToFraction = function (decimal: number) {\n  let top: number | string = decimal.toString().replace(/\\d+[.]/, '');\n  const bottom: number = Math.pow(10, top.length);\n  if (decimal > 1) {\n    top = +top + Math.floor(decimal) * bottom;\n  }\n  const x = gcd(top as number, bottom);\n  return {\n    top: (top as number / x),\n    bottom: (bottom / x),\n    display: (top as number / x) + ':' + (bottom / x),\n  };\n};\n\nconst Industries = () => {\n\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  let max = Math.ceil((Math.max(...data.filteredIndustryRCA.map(d => d.rca as number)) * 1.1) / 10) * 10;\n  let min = Math.min(...data.filteredIndustryRCA.map(d => d.rca as number));\n  if (max < 10) {\n    max = 10;\n  }\n  if (min >= 1) {\n    min = 0.1;\n  }\n  let scale = scaleLog()\n    .domain([min, max])\n    .range([0, 100])\n    .nice();\n\n  min = parseFloat(scale.invert(0).toFixed(5));\n  max = parseFloat(scale.invert(100).toFixed(5));\n\n  if (max.toString().length > min.toString().length - 1) {\n    min = 1 / max;\n  } else if (max.toString().length < min.toString().length - 1) {\n    max = 1 / min;\n  }\n\n  scale = scaleLog()\n    .domain([min, max])\n    .range([0, 100])\n    .nice();\n  const highPresenceScale = scaleLog()\n    .domain([1, max])\n    .range([0, 100])\n    .nice();\n\n  const lowPresenceScale = scaleLog()\n    .domain([1, min])\n    .range([0, 100])\n    .nice();\n\n  const formatValue = (value: number, direction: Direction) => {\n    const scale = direction === Direction.Over ? highPresenceScale : lowPresenceScale;\n    const scaledValue = parseFloat(scale.invert(value).toFixed(5));\n    if (scaledValue >= 1) {\n      return <>{scaledValue}<strong></strong></>;\n    } else {\n      const { top, bottom } = decimalToFraction(scaledValue);\n      return <><sup>{top}</sup>&frasl;<sub>{bottom}</sub><strong></strong></>;\n    }\n  };\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const industry = data.filteredIndustryRCA.find(d => d.naicsId && d.naicsId.toString() === datum.id);\n        const rows = [\n          ['NAICS:', datum.id],\n          ['RCA:', industry ? industry.rca.toFixed(3) : '0.000'],\n        ];\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows,\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        primaryData={data.highPresenceData}\n        secondaryData={data.lowPresenceData}\n        formatValue={formatValue}\n        highlighted={undefined}\n        onRowHover={setHovered}\n        nValuesToShow={10}\n        numberOfXAxisTicks={6}\n      // centerLineValue={scale(1) as number}\n      // centerLineLabel={centerLineLabel}\n      // overMideLineLabel={getString('global-specialization-over')}\n      // underMideLineLabel={getString('global-specialization-under')}\n      // scrollDownText={getString('global-specialization-scroll')}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  );\n};\n\nexport default Industries;\n","import React from 'react';\nimport BostonNewYork3Digit from './components/BostonNewYork3Digit';\nimport BostonAracaju6Digit from './components/BostonAracaju6Digit';\nimport BostonAracaju2Digit from './components/BostonAracaju2Digit';\nimport BostonAracaju1Digit from './components/BostonAracaju1Digit';\nimport BostonAracajuServicesOnly from './components/BostonAracajuServicesOnly';\nimport RCAComparison from './components/RCAComparison';\nimport {\n  Route,\n  Switch,\n  HashRouter,\n} from 'react-router-dom';\n\nconst App = () => {\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path={'/3-digit'} component={BostonNewYork3Digit} />\n        <Route exact path={'/6-digit'} component={BostonAracaju6Digit} />\n        <Route exact path={'/2-digit'} component={BostonAracaju2Digit} />\n        <Route exact path={'/1-digit'} component={BostonAracaju1Digit} />\n        <Route exact path={'/rca'} component={RCAComparison} />\n        <Route exact path={'/services-only'} component={BostonAracajuServicesOnly} />\n        <Route component={BostonNewYork3Digit} />\n      </Switch>\n    </HashRouter>\n  )\n}\n\nexport default App;\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}